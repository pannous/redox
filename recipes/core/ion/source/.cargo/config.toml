# Patch relibc to use local source
[patch.'https://gitlab.redox-os.org/redox-os/relibc.git']
relibc = { path = "/opt/other/redox/recipes/core/relibc/source" }
redox-rt = { path = "/opt/other/redox/recipes/core/relibc/source/redox-rt" }

[patch.crates-io]
relibc = { path = "/opt/other/redox/recipes/core/relibc/source" }
redox-rt = { path = "/opt/other/redox/recipes/core/relibc/source/redox-rt" }

# Cranelift build configuration for aarch64
[target.aarch64-unknown-redox-clif]
rustflags = [
    "-Clink-arg=-L/opt/other/redox/recipes/core/relibc/source/target/aarch64-unknown-redox-clif/release",
    "-Clink-arg=-L/opt/other/redox/build/aarch64/sysroot/lib",
    "-Clink-arg=-z",
    "-Clink-arg=muldefs",
    "-Cpanic=abort",
]

[env]
CARGO_INCREMENTAL = "0"

[net]
offline = true
